// Code generated by muxc. DO NOT EDIT.
// versions:
//   muxc {{ .MuxcVersion }}
// source: {{ .SourceFile }}

package {{ .Package }}

import (
	"net/http"
{{ range $index, $import := .Imports}}
	"{{$import -}}"
{{- end}}
)

func chain(f http.HandlerFunc, middlewares ...func(http.HandlerFunc) http.HandlerFunc) http.HandlerFunc {
	for _, m := range middlewares {
		f = m(f)
	}
	return f
}

func Middleware(m func(http.Handler) http.Handler) func(http.HandlerFunc) http.HandlerFunc {
	return func(next http.HandlerFunc) http.HandlerFunc {
		return m(next).ServeHTTP
	}
}

func ConfigureMux(mux *http.ServeMux{{- range $key, $val := .Args}}, {{$key}} {{$val}}{{- end}}) {
	{{- range $key, $val := .Vars}}
	{{$key}} := {{$val}}
	{{- end}}
	{{- range $index, $route := .Routes}}
	{{- range $index, $path := $route.ParsedPaths}}
	mux.Handle("{{$path.Method}}{{if not (eq $path.Method "")}} {{end}}{{$route.Base}}{{$path.Pattern}}", chain(
		{{Join (Append (Append (Slice $path.Handler) (Reverse $path.Middlewares)) (Reverse $route.Use)) ",\n		"}},
	))
	{{- end}}
	{{- end}}
}
